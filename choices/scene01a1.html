<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A Surprise</title>

  <script src="../js/globalSettings.js" defer></script>
  <!-- Fonts & Styles -->
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../css/choice-style.css" />

  <!-- Story -->
  <script>
    const storyLines = [
      "You thanked everyone and started your expedition.",
      "By evening, the ship had left the valley behind. Mist moved like ghosts across the water. The day was coming to an end. The sails creaked softly.",
      "The sails stretched above you as the loch shimmered with fading light. Bruhaven disappeared behind mist and memory.",
      "Below deck, the ship creaked with quiet familiarity. You stepped into the small cabin, the air still carrying the scent of her cloak.",
      "Something caught your eye, a glimpse of brown leather beneath a folded blanket.",
      "You reached down slowly…",
      "The bag.",
      "The same one you'd left behind.",
      "You stared at it. Frowned.",
      "“Impossible,” you whispered. “I said no.”",
      "A soft shuffle. A low, casual bark.",
      "Haggis sat nearby, tail wagging, tongue out, eyes full of innocent mischief.",
      "You blinked… then smiled.",
      "“Of course. Of course it was you, you naughty boy.”",
      "You knelt, ruffled Haggis's ears, and opened the bag. Iron Brew, shortbread, candles, her cloak, her book. All of it.",
      "\"You never really leave anything behind, do you?\"",
      "You stood, slung the bag over your shoulder, and looked toward the prow of the ship.",
      "The journey had only just begun but you're not empty handed.",
      "Suddenly, a split in the water appeared: two diverging paths. Your map glowed faintly, but offered no clarity.",
      "To the left lay the realm of the dwarves, whispered of in old tales.",
      "To the right, nothing but shadow and uncertainty."
    ];
  </script>

  <!-- Howler & JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
  <script defer src="../js/choice-js.js"></script>
</head>

<body class="fade-in">
  <div class="background" style="background-image: url('../images/kingFoundBag.jpg');"></div>

  <main class="scene-wrapper">
    <h1 class="scene-title">A Surprise</h1>

    <div class="narrative-box">
      <button id="prev" class="arrow-btn inside" aria-label="Previous line">⬅️</button>
      <section id="typewriter" class="typewriter-container"></section>
      <button id="next" class="arrow-btn inside" aria-label="Next line">➡️</button>
    </div>

    <nav id="choices" class="choices" aria-label="Choice navigation">
      <a href="../choices/scene02a.html" class="choice-button">Turn left, toward the dwarves</a>
      <a href="../choices/scene02b.html" class="choice-button">Turn right, toward the unknown</a>
    </nav>
  </main>

  <footer class="site-footer">
    <small>All images are AI generated.</small>
  </footer>

  <!-- Fade-out Transition Script -->
  <script>
    document.querySelectorAll('a[href]').forEach(link => {
      const href = link.getAttribute('href');
      if (href && !href.startsWith('#') && !href.startsWith('mailto:') && !href.startsWith('javascript:')) {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          document.body.classList.add('fade-out');
          setTimeout(() => {
            window.location.href = this.href;
          }, 500);
        });
      }
    });
  </script>
</body>
</html>
